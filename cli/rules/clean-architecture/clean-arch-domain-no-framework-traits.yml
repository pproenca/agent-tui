id: clean-arch-domain-no-framework-traits
language: rust
severity: error
message: "Domain types should not implement framework traits directly. Use adapters/infra."
note: |
  Keep domain types framework-agnostic. Implement framework traits in adapters or infra DTOs.
files:
  - "crates/agent-tui/src/domain/**/*.rs"
rule:
  any:
    - pattern: impl Serialize for $TYPE
    - pattern: impl Deserialize for $TYPE
    - pattern: impl serde::Serialize for $TYPE
    - pattern: impl serde::Deserialize for $TYPE
    - pattern: impl axum::extract::FromRequest<$$_> for $TYPE
    - pattern: impl axum::response::IntoResponse for $TYPE
    - pattern: impl sqlx::FromRow for $TYPE
    - pattern: impl tonic::IntoRequest<$$_> for $TYPE
