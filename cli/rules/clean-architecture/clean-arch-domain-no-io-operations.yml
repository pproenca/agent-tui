id: clean-arch-domain-no-io-operations
language: rust
severity: error
message: "Domain layer must not perform I/O, process control, or threading."
note: |
  Domain should be pure business logic with no side effects.
  Move I/O, process management, and threading to infra.
files:
  - "crates/agent-tui/src/domain/**/*.rs"
rule:
  any:
    - kind: use_declaration
      any:
        - pattern: use std::fs::$$$ITEMS
        - pattern: use std::fs
        - pattern: use std::net::$$$ITEMS
        - pattern: use std::net
        - pattern: use std::process::$$$ITEMS
        - pattern: use std::process
        - pattern: use std::thread::$$$ITEMS
        - pattern: use std::thread
        - pattern: use tokio::fs::$$$ITEMS
        - pattern: use tokio::net::$$$ITEMS
        - pattern: use tokio::process::$$$ITEMS
        - pattern: use tokio::task::$$$ITEMS
    - pattern: std::fs::$FUNC($$$)
    - pattern: std::net::$TYPE::$$$($$$)
    - pattern: std::process::Command::new($$$)
    - pattern: std::process::Command::$FUNC($$$)
    - pattern: std::thread::sleep($$$)
    - pattern: std::thread::spawn($$$)
    - pattern: tokio::fs::$FUNC($$$)
    - pattern: tokio::net::$TYPE::$$$($$$)
    - pattern: tokio::process::Command::new($$$)
    - pattern: tokio::task::spawn($$$)
    - pattern: tokio::task::spawn_blocking($$$)
    - pattern: tokio::time::sleep($$$)
