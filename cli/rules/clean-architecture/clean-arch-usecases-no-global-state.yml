id: clean-arch-usecases-no-global-state
language: rust
severity: error
message: "Use cases should not rely on global state. Inject dependencies via constructors."
note: |
  Global state hides dependencies and makes testing harder.
  Prefer constructor injection and explicit ports.
files:
  - "crates/agent-tui/src/usecases/**/*.rs"
rule:
  kind: use_declaration
  any:
    - regex: "^use lazy_static(::|;)"
    - regex: "^use once_cell(::|;)"
    - regex: "^use std::sync::Once(::|;)"
    - regex: "^use std::sync::OnceLock(::|;)"
    - regex: "^use std::sync::LazyLock(::|;)"
