id: clean-arch-usecases-no-infrastructure
language: rust
severity: error
message: "Use cases must not depend on adapters, app, or infrastructure."
note: |
  Use cases orchestrate domain logic and depend only on domain + ports.
  Adapters and infra are outer layers.
files:
  - "crates/agent-tui/src/usecases/**/*.rs"
rule:
  kind: use_declaration
  any:
    - regex: "^use crate::infra::"
    - regex: "^use crate::app::"
    - regex: "^use crate::adapters::"
  not:
    any:
      - regex: "^use crate::infra::daemon::test_support(::|;)"
