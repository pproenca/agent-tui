id: clean-arch-domain-no-async
language: rust
severity: error
message: "Domain functions should be synchronous. Async is an infrastructure concern."
note: |
  Async/await is a runtime concern belonging to infrastructure layer.
  Domain logic should be pure and synchronous.
  If you need async, the caller in the infrastructure layer should handle it.
files:
  - "crates/agent-tui/src/daemon/domain/**/*.rs"
rule:
  kind: function_item
  has:
    kind: function_modifiers
    regex: "async"
    stopBy: end
