id: clean-arch-domain-no-outer-layers
language: rust
severity: error
message: "Domain layer must not import from outer layers (usecases, handlers, adapters, server, transport)."
note: |
  Clean Architecture Dependency Rule: Inner layers must never depend on outer layers.
  Domain is the innermost layer and should only contain pure business types.
files:
  - "crates/agent-tui/src/daemon/domain/**/*.rs"
rule:
  kind: use_declaration
  any:
    - regex: "^use crate::daemon::usecases::"
    - regex: "^use crate::daemon::handlers::"
    - regex: "^use crate::daemon::adapters::"
    - regex: "^use crate::daemon::server::"
    - regex: "^use crate::daemon::server;$"
    - regex: "^use crate::daemon::session::"
    - regex: "^use crate::daemon::transport::"
    - regex: "^use super::super::usecases::"
    - regex: "^use super::super::handlers::"
    - regex: "^use super::super::adapters::"
    - regex: "^use super::super::server::"
