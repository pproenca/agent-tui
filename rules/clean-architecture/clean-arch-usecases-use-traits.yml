id: clean-arch-usecases-use-traits
language: rust
severity: warning
message: "Use cases should depend on SessionRepository trait, not concrete infra types."
note: |
  Dependency Inversion Principle: Use cases should depend on abstractions (traits),
  not concrete implementations. Import SessionRepository from crate::usecases::ports instead.
files:
  - "crates/agent-tui/src/usecases/**/*.rs"
rule:
  kind: use_declaration
  any:
    - pattern: use crate::infra::daemon::Session
    - pattern: use crate::infra::daemon::SessionManager
