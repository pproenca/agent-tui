id: iter-avoid-collect-iter
language: rust
severity: warning
message: "Avoid collect().iter() - unnecessary intermediate allocation"
note: |
  Collecting into a Vec just to iterate over it creates an unnecessary intermediate allocation.
  Consider keeping the iterator chain or using into_iter() if ownership is needed.
rule:
  any:
    - pattern: $ITER.collect::<Vec<_>>().iter()
    - pattern: $ITER.collect::<Vec<$T>>().iter()
